*{box-sizing:border-box}
body{margin:0;font-family:system-ui;background:#fff;color:#111}

/* ===== TOP ===== */
.topbar{
  padding:8px;
  border-bottom:1px solid #e5e5e5;
  display:flex;
  gap:10px;
  align-items:center;
  overflow-x:auto
}
.topbar input{padding:4px 6px;font-size:14px}

/* ===== LEGEND ===== */
.legend{display:flex;gap:6px;font-size:12px;white-space:nowrap}
.legend-item{
  display:flex;align-items:center;gap:4px;
  padding:4px 6px;border-radius:6px;cursor:pointer
}
.legend-item.active{background:#eee}
.legend-color{width:10px;height:10px;border-radius:3px}

/* ===== GRID ===== */
.header,.row{display:grid}

/* ===== Y AXIS ===== */
.room{
  width:88px;
  padding:6px;
  font-size:12px;
  background:#fafafa;
  border-right:1px solid #e5e5e5;
  position:sticky;
  left:0;
  z-index:3;
}
.header .room{background:#f5f5f5;z-index:4}

/* ===== CELL ===== */
.cell{
  height:34px;
  border:1px solid #eee;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
}
.cell.selecting{background:rgba(255,56,92,.3)}

/* ===== BAR ===== */
.bar{
  height:34px;
  color:#fff;
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:4px;
  cursor:pointer
}

/* ===== COLORS ===== */
.src-airbnb{background:#ff385c}
.src-booking{background:#003580}
.src-agoda{background:#e60023}
.src-trip{background:#ff6f00}
.src-slh{background:#6a5acd}
.src-walkinwayne{background:#2e8b57}
.src-walkinsoo{background:#8b4513}

/* ===== SUMMARY ===== */
#summary{
  border-top:1px solid #eee;
  padding:10px;
  font-size:13px
}
.summary-title{
  font-weight:600;
  margin:6px 0 4px
}
.summary-row{
  display:flex;
  justify-content:space-between;
  padding:4px 0;
  cursor:pointer
}
.summary-row:hover{background:#f6f6f6}

/* ===== MODAL ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  display:none;
  z-index:999
}
.modal-box{
  background:#fff;
  border-radius:14px 14px 0 0;
  padding:10px 12px;
  position:absolute;
  bottom:0;left:0;right:0
}
.modal-box input,
.modal-box select{
  width:100%;
  height:36px;
  margin:4px 0;
  font-size:14px;
}
.actions{display:flex;gap:8px}
.actions button{flex:1}
#saveBtn:disabled{opacity:.4}

/* ===== PAGE LAYOUT ===== */
html, body {
  height: 100%;
  margin: 0;
}

.page {
  height: 100svh; /* mobile safe viewport */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* 禁止 body 滚动 */
}

/* ===== TOP BAR FIXED ===== */
.topbar {
  flex: 0 0 auto;
  position: sticky;
  top: 0;
  z-index: 10;
  background: #fff;
}

/* ===== SCROLLABLE CENTER ===== */
.content {
  flex: 1 1 auto;
  overflow: auto;
  -webkit-overflow-scrolling: touch; /* iOS 顺滑滚动 */
}

/* ===== SUMMARY FIXED ===== */
#summary {
  flex: 0 0 auto;
  position: sticky;
  bottom: 0;
  z-index: 10;
  background: #fff;
}

#app {
  min-width: max-content; /* 横向正常展开 */
}

@media (max-width: 768px) {
  .cell,
  .bar {
    font-size: 11px;
  }

  .room {
    width: 72px;
  }
}

.room {
  position: sticky;
  left: 0;
  z-index: 4;
}

.header {
  position: sticky;
  top: 0;
  z-index: 5;
  background: #fff; 
}

.header .room {
  z-index: 6; /* 左上角永远最高 */
  background: #fff; 
}

